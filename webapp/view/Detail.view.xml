<mvc:View
    controllerName="bs.ui5.projeto.controller.Detail"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m"
    xmlns:f="sap.ui.layout.form"
    xmlns:l="sap.ui.layout"
    height="100%">

    <Page
        id="detailPage"
        title="{nome}"
        showNavButton="true"
        navButtonPress="onNavBack">

        <headerContent>
            <Button
                id="addResourceBtn"
                text="{i18n>addResource}"
                icon="sap-icon://add"
                type="Emphasized" 
                press="onAddResource" />
        </headerContent>

        <content>
            <VBox class="sapUiSmallMargin">
                
                <Title 
                    text="{i18n>sectionResources}" 
                    level="H3" 
                    titleStyle="H4"
                    class="sapUiSmallMarginBottom" />

                <Toolbar>
                    <SearchField
                        id="resourceSearchField"
                        width="100%"
                        placeholder="{i18n>searchPlaceholder}"
                        search="onSearchResources"
                        liveChange="onSearchResources">
                        <layoutData>
                            <ToolbarLayoutData shrinkable="true" />
                        </layoutData>
                    </SearchField>
                    <ToolbarSpacer />
                    <Button
                        text="{i18n>close}"
                        icon="sap-icon://clear-filter"
                        press="onClearSearch"
                        type="Transparent" />
                </Toolbar>

                <Table 
                    id="resourcesTable" 
                    items="{path: 'recursos'}"
                    growing="true"
                    growingThreshold="10"
                    sticky="HeaderToolbar,ColumnHeaders"
                    class="sapUiSmallMarginTop">
                    <columns>
                        <Column width="25%"><Text text="{i18n>field.title}" /></Column>
                        <Column width="15%"><Text text="{i18n>field.type}" /></Column>
                        <Column width="35%"><Text text="{i18n>field.description}" /></Column>
                        <Column width="10%" hAlign="Center"><Text text="{i18n>field.mandatory}" /></Column>
                        <Column width="15%" minScreenWidth="Tablet" demandPopin="true" hAlign="End">
                            <Text text="{i18n>field.url}" />
                        </Column>
                    </columns>
                    <items>
                        <ColumnListItem>
                            <cells>
                                <Text text="{titulo}" wrapping="true" />
                                <Text text="{tipo}" />
                                <Text 
                                    text="{
                                        path: 'descricao',
                                        formatter: '.formatter.formatDescription'
                                    }" 
                                    wrapping="true" />
                                <CheckBox selected="{obrigatorio}" editable="false" />
                                <Link 
                                    text="{i18n>openResource}" 
                                    href="{url}" 
                                    target="_blank"
                                    visible="{= ${url} !== '' }" />
                            </cells>
                        </ColumnListItem>
                    </items>
                </Table>
            </VBox>
        </content>
    </Page>
</mvc:View>
